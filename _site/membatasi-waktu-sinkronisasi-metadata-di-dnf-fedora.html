<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link href="/assets/css/syntax.css" rel="stylesheet" ><link href="https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap" rel="stylesheet"><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="Membatasi Waktu Sinkronisasi Metadata Di Dnf Fedora" /><meta name="author" content="Ali" /><meta property="og:locale" content="en_US" /><meta name="description" content="Fedora setiap kali kita ingin melakukan pemasangan ataupun pencarian paket aplikasi dari dnf, ia akan selalu melakukan sinkronisasi metadata. Perlu diketahui bahwa metadata dibutuhkan dnf sebagai indeksi berkas pada repositori. Simpelnya, metadata itu pangkalan data dari dnf." /><meta property="og:description" content="Fedora setiap kali kita ingin melakukan pemasangan ataupun pencarian paket aplikasi dari dnf, ia akan selalu melakukan sinkronisasi metadata. Perlu diketahui bahwa metadata dibutuhkan dnf sebagai indeksi berkas pada repositori. Simpelnya, metadata itu pangkalan data dari dnf." /><link rel="canonical" href="http://localhost:4000/membatasi-waktu-sinkronisasi-metadata-di-dnf-fedora" /><meta property="og:url" content="http://localhost:4000/membatasi-waktu-sinkronisasi-metadata-di-dnf-fedora" /><meta property="og:site_name" content="Situs Ali" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-04-21T21:51:01+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Membatasi Waktu Sinkronisasi Metadata Di Dnf Fedora" /><meta name="twitter:site" content="@alisoftware" /><meta name="twitter:creator" content="@alisoftware" /> <script type="application/ld+json"> {"description":"Fedora setiap kali kita ingin melakukan pemasangan ataupun pencarian paket aplikasi dari dnf, ia akan selalu melakukan sinkronisasi metadata. Perlu diketahui bahwa metadata dibutuhkan dnf sebagai indeksi berkas pada repositori. Simpelnya, metadata itu pangkalan data dari dnf.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/membatasi-waktu-sinkronisasi-metadata-di-dnf-fedora"},"@type":"BlogPosting","url":"http://localhost:4000/membatasi-waktu-sinkronisasi-metadata-di-dnf-fedora","headline":"Membatasi Waktu Sinkronisasi Metadata Di Dnf Fedora","dateModified":"2019-04-21T21:51:01+07:00","datePublished":"2019-04-21T21:51:01+07:00","author":{"@type":"Person","name":"Ali"},"@context":"https://schema.org"}</script><title> Membatasi Waktu Sinkronisasi Metadata Di Dnf Fedora - Situs Ali</title><link rel="shortcut icon" href="/favicon.png"><link rel="alternate" type="application/atom+xml" title="Situs Ali" href="/atom.xml"><link rel="alternate" type="application/json" title="Situs Ali" href="http://localhost:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:system-ui, sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}code,pre{background:transparent}html,body{font-family:'Comic Neue', cursive;font-size:1.2rem}ul,ol{margin-left:1.5rem}</style></head><body><main role="main"><header role="banner"> <!--<h1 class="logo">Situs Ali</h1>--><nav role="navigation"><ul><li><a href="/" >Home</a></li><li><a href="/about" >About</a></li><li><a href="/search" >Search</a></li><li><a href="/atom.xml" >Rss</a></li></ul></nav></header><section class="post"><h2>Membatasi Waktu Sinkronisasi Metadata Di Dnf Fedora</h2><p>Fedora setiap kali kita ingin melakukan pemasangan ataupun pencarian paket aplikasi dari <code class="highlighter-rouge">dnf</code>, ia akan selalu melakukan sinkronisasi metadata. Perlu diketahui bahwa metadata dibutuhkan <code class="highlighter-rouge">dnf</code> sebagai indeksi berkas pada repositori. Simpelnya, metadata itu pangkalan data dari <code class="highlighter-rouge">dnf</code>.</p><h2 id="pokok-masalah">Pokok Masalah</h2><p>Sinkronisasi metadata sangatlah penting, karena pada saat kita ingin melakukan pemasangan paket, <code class="highlighter-rouge">dnf</code> akan mengecek paket tersebut pada metadata di lokal dan memastikan semuanya sama dengan peladen repositori. Jika tidak, tentu kita akan mendapati galat 404 karena berkas tidak ada dalam peladen.</p><p>Fedora secara asali menerapkan sinkronisasi metadata selama 48 jam atau 2 hari. Jadi jika sudah lebih dari dua hari, kalian ingin memasang aplikasi, maka <code class="highlighter-rouge">dnf</code> akan memperbaharui metadata-nya.</p><p><img src="/img/membatasi-waktu-sinkronisasi-metadata-di-dnf-fedora-1.png" alt="Contoh Pembaruan Metadata" /></p><p>Gambar di atas hanya contoh pembaruan metadata. Kalau metadata berukuran kecil (filesize), mungkin tidak akan menjadi masalah. Lainhal jika berukuran hingga puluhan megabyte akan sangat menjengkelkan, terlebih lagi bagi para pengguna internet berkecepatan rendah dan dibatasi kuota. Ini akan sangat menyiksa. Kebetulan juga saya salah satu yang merasakan itu ðŸ¤£.</p><h2 id="solusi">Solusi</h2><p>Saya ada sedikit solusi yang mungkin akan membantu kalian. Yakni dengan kita membatasi <code class="highlighter-rouge">metadata_expire</code>. Kalian bisa memperpanjang masa kadaluarsanya sebanyak satu minggu atau satu bulan. Tapi saya saya lebih baik jangan diberi kadaluarsa, mengapa? Karena kita bisa memperbarui metadata secara manual dari <code class="highlighter-rouge">dnf</code>.</p><p>Berikut ini solusinya. Pertama-tama kalian sunting berkas <code class="highlighter-rouge">/etc/dnf/dnf.conf</code></p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>vim /etc/dnf/dnf.conf
</code></pre></div></div><p>Lalu tambahkan <code class="highlighter-rouge">metadata_expire=never</code> dan <code class="highlighter-rouge">metadata_timer_sync=0</code> dibaris paling bawah seperti gambar berikut:</p><p><img src="/img/membatasi-waktu-sinkronisasi-metadata-di-dnf-fedora-2.png" alt="Metadata" /></p><p>Kalau kalian ingin menganti menjadi 6 hari misalnya. Tinggal ganti kata <code class="highlighter-rouge">never</code> dengan <code class="highlighter-rouge">6h</code> atau <code class="highlighter-rouge">86400</code>.</p><p>Kemudian pastikan semua repositori tidak ter-override dengan masing-masing konfigurasinya. Kita bisa cek dengan cara berikut:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">grep</span> <span class="nt">-r</span> /etc/yum.repos.d/ <span class="nt">-e</span> <span class="s1">'metadata_expire'</span>
</code></pre></div></div><p><img src="/img/membatasi-waktu-sinkronisasi-metadata-di-dnf-fedora-3.png" alt="Metadata" /></p><p>Kalian lihat beberapa repositori ada yang tertimpa dengan konfigurasinya. Ada yang kadaluarsa 6 jam ada juga yang 7 hari. Oleh karena itu kita harus merubahnya menjadi <code class="highlighter-rouge">expired</code>. Sebelum diubah cek dulu repositori mana saja yang dipakai, dengan perintah berikut:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">grep</span> <span class="nt">-Ril</span> /etc/yum.repos.d/ <span class="nt">-e</span> <span class="s1">'enabled=1'</span>
</code></pre></div></div><p><img src="/img/membatasi-waktu-sinkronisasi-metadata-di-dnf-fedora-4.png" alt="Metadata" /></p><p>Nah, itu dia repostori yang aktif. Sekarang tinggal kita ubah satu persatu berkas seperti di atas.</p><p>Langkah terakhir ketika kita ingin memasang aplikasi pastikan ditambah parameter <code class="highlighter-rouge">--cacheonly</code>. Contoh</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>dnf <span class="nb">install </span>vlc <span class="nt">--cacheonly</span>
</code></pre></div></div><p>Semoga bermanfaat ðŸ˜‰</p><span class="meta"><time datetime="2019-04-21T21:51:01+07:00">April 21, 2019</time> &middot; <a href="/tag/fedora">fedora</a>, <a href="/tag/gnulinux">gnulinux</a></span> <!--<span class="meta"><time datetime="2019-04-21T21:51:01+07:00">April 21, 2019</time> &middot; <a class="post" href="/tag/fedora">fedora</a>, <a class="post" href="/tag/gnulinux">gnulinux</a></span> --></section></main></body></html>
